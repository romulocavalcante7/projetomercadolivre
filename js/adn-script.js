!function(){"use strict";var t={d:function(n,e){for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{default:function(){return _}});var e=function(t){var n,e;return null!==(n=null===(e="; ".concat(document.cookie).split("; ".concat(t,"=")).pop())||void 0===e?void 0:e.split(";").shift())&&void 0!==n?n:null},r=function(t){return new Promise((function(n,r){var i=e("adserver-scope"),o=t.get("ad_unit")||"";i&&t.set("scope",i);var a=new XMLHttpRequest;a.open("GET","".concat(function(t){var n=window.location.hostname,e=n.split(".").slice(1).join(".");return n.includes("mercadopago")?"https://placements.".concat(e,"/v1/adn/").concat(t):"https://".concat(n.replace("dev","www"),"/adn/api")}(o),"?").concat(t.toString())),a.responseType="json",a.withCredentials=!0,a.onload=function(){[200,204].includes(null==a?void 0:a.status)||r(new Error("status code ".concat(null==a?void 0:a.status," not valid"))),n(a.response)},a.onerror=function(){r(new Error("XMLHttpRequest network error"))},a.send()}))},i=function(t){var n=document.createElement("script");"noModule"in n!=!1&&Promise.allSettled?t():(n.src="https://http2.mlstatic.com/frontend-assets/adn-frontend-library/adn-polyfills.js",n.defer=!0,n.onload=t,document.head.appendChild(n))},o="success",a=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){return{status:o,source:"script",params:{placement:(null==t?void 0:t.getAttribute("data-placement"))||"",page:(null==t?void 0:t.getAttribute("data-page"))||"",slot_id:(null==t?void 0:t.getAttribute("data-slot_id"))||""}}}(t);if(n){r.status="error",r.reason=n;var i=new CustomEvent("adn-banner-empty",{detail:{message:n},bubbles:!0,composed:!0});null==t||t.dispatchEvent(i),null==t||t.setAttribute("style","display:none;")}e&&(r.status=o),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/advertising/adn";window.melidata&&window.melidata("cleanAndSend","event",{path:n,event_data:t})}(r)},u=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==n?e:3&e|8).toString(16)}))},c=["sponsor_landing","search"],l=["ios","android"],s=["fast_loading"];function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o,a,u=[],c=!0,l=!1;try{if(o=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=o.call(e)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,n)||p(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,n){if(t){if("string"==typeof t)return v(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,n):void 0}}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var b=function(t){try{return JSON.stringify(t)}catch(t){return JSON.stringify([])}},m=function(t){return t.getAttribute("data-uid")||""},y=function(t){return window["adn-scripts"][m(t)]},h=function(t,n){window["adn-scripts"][m(t)]=n},g=function(t){for(!function(t){y(t)&&(y(t).disconnect(),h(t,null))}(t);t.firstChild;)t.removeChild(t.firstChild)},w=function(t){var n=t.getAttribute("data-content")||"{}";try{var e=JSON.parse(n),r=e.fast_loading,i=function(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(n.indexOf(r)>=0)continue;e[r]=t[r]}return e}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||{}.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}(e,s);return r?(t.setAttribute("data-content",JSON.stringify(i)),r):null}catch(n){return a(t,"Invalid JSON data-content"),null}},x=function(t){for(var n=["component","content","uid"],e={},r=0,i=!0;r<t.attributes.length&&i;){var o,a=null!==(o=t.attributes[r].name.replace("data-",""))&&void 0!==o?o:"";n.includes(a)||(e["".concat(a)]=t.attributes[r].value),"content"===a&&(e=JSON.parse(t.attributes[r].value).queries,i=!1),r+=1}return new URLSearchParams(e)},A=function(t){return new Promise((function(n,e){g(t),function(t){return t.hasAttribute("data-uid")}(t)||function(t){t.setAttribute("data-uid",u())}(t);var i=w(t);if(i){var o=f(i.items,1)[0];n({item:o,banner:t})}else{var c=x(t);c.set("unique_id",u()),r(c).then((function(r){if(null!=r&&r.items.length){var i=f(r.items,1)[0];n({item:i,banner:t})}else a(t,"Empty response, with params ".concat(c.toString())),e()})).catch((function(n){a(t,"fail fetching: ".concat(n.message,", with params ").concat(c.toString())),e()}))}}))},S=function(t,n){var e;!function(t,n){var e=n.get("page")||"",r=n.get("platform")||"";c.includes(e)&&l.includes(r)&&t.setAttribute("data-auto_refresh","initial")}(t,x(t)),"initial"===(null!==(e=t.getAttribute("data-auto_refresh"))&&void 0!==e?e:"")&&(t.setAttribute("data-auto_refresh","ready"),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&"finished"===window.adn&&(null!=t&&t.hasAttribute("style")&&(null==t||t.removeAttribute("style")),n())})))};window["adn-scripts"]={};var O=function t(){window.adn="loaded";var n=document.querySelectorAll('[data-component="adn"]');n.length>0?Promise.allSettled(d(n).map(A)).then((function(t){var n=function(t){var n=t.item,r=n.content,i=r.actions.content_link.link,o=r.texts,u=r.images,c=r.colors,l=n.event_tracking,s=l.print,d=l.click,f=l.view,p=n.template,v=n.lazy_loading_print_percentage,m=n.is_off_meli,y=t.banner;g(y);var w=e("adn-template-tag")||p.tag,x=document.createElement("".concat(w));if(Object.keys(o).forEach((function(t){return x.setAttribute(t,o[t])})),Object.keys(u).forEach((function(t){return x.setAttribute(t,u[t])})),Object.keys(c).forEach((function(t){return x.setAttribute(t,c[t])})),x.setAttribute("destination_url",i),x.setAttribute("print_url",b(s)),x.setAttribute("click_url",b(d)),f&&x.setAttribute("view_url",b(f)),m&&x.setAttribute("target","_blank"),v>-1&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&"isIntersecting"in window.IntersectionObserverEntry.prototype){var A=function(){var t=arguments.length>1?arguments[1]:void 0;return new IntersectionObserver((function(n,e){n.forEach((function(n){n.isIntersecting&&(n.target.appendChild(t),e.disconnect())}))}),{root:null,rootMargin:"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,"%")})}(v,x);A.observe(y),h(y,A)}else y.appendChild(x);a(y)};t.forEach((function(t){if("fulfilled"===t.status){var r=t.value,i=r.item.template,o=r.banner;if(window["adn-scripts"][i.url])n(t.value);else{var u=i.url,c=e("adn-template-version");if(c){u=u.replace(/(\d+\.\d+\.\d+)(?=.js)/,"".concat(c))}var l=e("adn-template-names");if(l)l.split(",").forEach((function(t){var n=f(t.split(":"),2),e=n[0],r=n[1],i=new RegExp("/adn-frontend-library/".concat(e,"..*js"));u=u.replace(i,"/adn-frontend-library/".concat(r,".js"))}));window["adn-scripts"][i.url]=u;var s=document.createElement("script");s.src=u,s.defer=!0,s.onload=function(){return n(t.value)},document.head.appendChild(s)}a(o)}}))})).catch((function(){n.forEach((function(t){return a(t,"error adding banners")}))})).finally((function(){window.adn="finished",n.forEach((function(n){return S(n,t)}))})):a(void 0,"banners not found")},_=void i(O),E=window;for(var j in n)E[j]=n[j];n.__esModule&&Object.defineProperty(E,"__esModule",{value:!0})}();
//# sourceMappingURL=adn-script.js.map